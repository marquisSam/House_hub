<div class="todo-container">
  <div class="section-banner">
    <div class="title-section">
      <h1>Todo Management</h1>
      <div class="actions">
        <button
          (click)="openCreateModal()"
          nz-button
          nzType="primary"
          [nzSize]="'large'"
          nzShape="circle"
        >
          <nz-icon nzType="download" />
        </button>
      </div>
    </div>
    <p>Manage your tasks efficiently with our Todo application.</p>
  </div>

  <!-- Error handling -->
  @if (error()) {
  <div class="error-message">
    <p>{{ error() }}</p>
    <button (click)="clearError()">Dismiss</button>
  </div>
  }

  <h2>Current Todos ({{ todosCount() }})</h2>
  <div class="grid">
    @if (isLoading()) {
    <div class="spinner-overlay">is ;Loading...</div>
    } @for (todo of todos(); track todo.Id) {
    <div class="todo-item">
      <h3>{{ todo.Title }}</h3>
      <p>{{ todo.Description }}</p>
      <p><strong>Priority:</strong> {{ todo.Priority }}</p>
      <p><strong>Category:</strong> {{ todo.Category }}</p>
      <p><strong>Due Date:</strong> {{ todo.DueDate }}</p>
      <p><strong>Status:</strong> {{ todo.IsCompleted ? 'Completed' : 'Pending' }}</p>

      <div class="todo-actions">
        <button nz-button nzType="default" nzSize="small" (click)="openEditModal(todo.Id)">
          <nz-icon nzType="edit" />
          Edit
        </button>

        <button
          nz-button
          nzType="primary"
          nzSize="small"
          [disabled]="todo.IsCompleted"
          (click)="toggleComplete(todo.Id)"
        >
          <nz-icon [nzType]="todo.IsCompleted ? 'check-circle' : 'clock-circle'" />
          {{ todo.IsCompleted ? 'Completed' : 'Mark Complete' }}
        </button>
      </div>
    </div>
    } @empty {
    <p>No todos found.</p>
    }
  </div>
</div>
